---
params:
  model: ""
  project: ""
  compile: FALSE
---



```{r,echo=FALSE,message=FALSE}
library(mrgsolve)
library(dplyr)
library(knitr)
options(width=120)
opts_chunk$set(comment='',echo=FALSE,message=FALSE)
```

```{r,message=FALSE}
mod <- mread(params$model,params$project,compile=params$compile,quiet=TRUE)
```

```{r}
blocks <- modelparse(mod@code,drop_blank=FALSE,comment_re="//")
prob <- blocks[["PROB"]]
if(is.null(prob)) prob <- paste0("# Model: `", model(mod),"`")

par <-  capture.output(param(mod))
init <- capture.output(init(mod))
rmbl <- function(x) x[x!=""]

```

`r knit(text=prob)`



# Details
```{r}
d <- mrgsolve:::details(mod)
if(nrow(d) > 0) {
  
  om <- omat(mod)
  dfom <- data.frame(name=unlist(labels(om)),
                     value=diag(as.matrix(om)))

  sg <- smat(mod)
  dfsg <- data.frame(name=unlist(labels(sg)),
                     value=diag(as.matrix(sg)))
  
  dfp <- 
    as.data.frame(t(as.data.frame(allparam(mod)))) %>% 
    setNames(.,"value") %>%
    mutate(name=rownames(.))
  
  dfi <- as.data.frame(t(as.data.frame(init(mod)))) %>%
    setNames(.,"value") %>%
    mutate(name=rownames(.))
  
  dfj <- bind_rows(dfp,dfi,dfom,dfsg)
  
  d <- left_join(d,dfj,by="name")
  
  print(d,row.names=FALSE)
  
} else {
  cat("No annotations were found in the model file.") 
}

```

## Parameter and fixed values
```{r}
allparam(mod)
```

## Compartments and initial values
```{r}
init(mod)
```

# Model code

```{r}
cat(blocks(mod,GLOBAL,MAIN,ODE,TABLE,SET,PKMODEL),sep="\n")
```




